//Data Source
var data = require("characters");

//Table Window
var tableWindow = Ti.UI.createWindow({
	backgroundColor: "gray",
	title:"Characters in a Table",
	modal: true
});

//Sounds - from http://www.soundboard.com/sb/R2D2_R2_D2_sounds
var r2D2Sound = Ti.Media.createSound({url:"r2D2.mp3"});
var backSoundR2D2 = Ti.Media.createSound({url:"backButtonR2D2.mp3"});

//Sections
var sections = [];

for (n in data.myCharacters) {
	
	var tableSection = Ti.UI.createTableViewSection({
			headerTitle: data.myCharacters[n].name,
			footerTitle: data.myCharacters[n].description
		});
	for (var i = 0, j = data.myCharacters[n].weapons.length; i < j; i++){
		var theRow = Ti.UI.createTableViewRow({
			title: data.myCharacters[n].weapons[i].title,
			desc: data.myCharacters[n].weapons[i].description,
			hasDetail: true	
			});
		theRow.addEventListener("click", function() 
			{alert("Test");
			});
		tableSection.add(theRow);
	};
	sections.push(tableSection);
};	


// var characterLukeSkywalker = Ti.UI.createTableViewSe-ction({
	// headerTitle: data.myCharacters.lukeSkywalker.name,
	// footerTitle: data.myCharacters.lukeSkywalker.description
	// });
// 	

// 
// 	
// for (var i = 0, j = data.myCharacters.lukeSkywalker.weapons.length; i < j; i++){
		// var theRow = Ti.UI.createTableViewRow({
		// title: data.myCharacters.lukeSkywalker.weapons[i].title,
		// hasDetail: true	
		// });
	// theRow.addEventListener("click", function() 
		// {alert("Test");
		// });
	// //theRow.addEventListener("Click", weaponDetail(i));
	// characterLukeSkywalker.add(theRow);
// 	
// };
// 
// //Second Table Section
// var characterHanSolo = Ti.UI.createTableViewSection({
	// headerTitle: data.myCharacters.hanSolo.name,
	// footerTitle: data.myCharacters.hanSolo.description
// });
// 
// 	
// for (var i = 0, j = data.myCharacters.hanSolo.weapons.length; i < j; i++){
		// var theRow = Ti.UI.createTableViewRow({
		// title: data.myCharacters.hanSolo.weapons[i].title,
		// hasDetail: true
	// });
	// theRow.addEventListener("click", function() 
		// {alert("Test");
		// });
	//theRo
	// var weaponDetailNavWindow = Ti.UI.iOS.createNavigationWindow({
			// window: tableWindow
		// });
	// characterHanSolo.add(theRow);
// };

//Back Button
var backButton = Ti.UI.createButton({ 
backgroundColor: "#0D0D0D",
bottom: 35,
width: 85,
borderRadius: 10,
title: "BACK"
});

backButton.addEventListener("click", function(){
	tableWindow.close();
	backSoundR2D2.play();
});

//Create table
var characterTable = Ti.UI.createTableView({
style: Ti.UI.iPhone.TableViewStyle.GROUPED,
data:[sections]
});


tableWindow.add(characterTable, backButton);

tableButton.addEventListener("click", function(){
	tableWindow.open();
	r2D2Sound.play();
});